{% extends 'layout/base.html' %}
{% block content %}
<div class="page-header">
    <div style="display: flex; justify-content: space-between; align-items: center;">
        <div>
            <h1 style="margin: 0;">–¢–∞—Ä–∏—Ñ–Ω—ã–µ –ø–ª–∞–Ω—ã</h1>
            <p class="muted" style="margin: 8px 0 0 0;">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–∞—Ä–∏—Ñ–Ω—ã–º–∏ –ø–ª–∞–Ω–∞–º–∏ —Å–∏—Å—Ç–µ–º—ã</p>
        </div>
        <a class="btn primary" href="/plans/create">
            <span>‚ûï</span>
            <span>–î–æ–±–∞–≤–∏—Ç—å –ø–ª–∞–Ω</span>
        </a>
    </div>
</div>

{% if error_message %}
<div class="alert error" style="margin-bottom: 20px;">
    <span>‚ö†Ô∏è</span>
    <span>{{ error_message }}</span>
</div>
{% endif %}

<div class="plans-grid">
    {% for plan in plans %}
    <div class="plan-card">
        <div class="plan-header">
            <h3>{{ plan.name }}</h3>
            <div class="plan-badge {% if plan.name == 'Pro' %}badge-pro{% else %}badge-free{% endif %}">
                {{ plan.name }}
            </div>
        </div>
        <div class="plan-content">
            <div class="plan-feature">
                <span class="feature-icon">üìä</span>
                <div>
                    <strong>–õ–∏–º–∏—Ç –ø–æ–ø—ã—Ç–æ–∫:</strong>
                    <span class="feature-value">
                        {% if plan.free_attempts_limit >= 999999 %}
                        –ë–µ–∑–ª–∏–º–∏—Ç
                        {% else %}
                        {{ plan.free_attempts_limit }}
                        {% endif %}
                    </span>
                </div>
            </div>
            <div class="plan-stats">
                <span class="stat-label">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:</span>
                <span class="stat-value">{{ plan_stats.get(plan.id, 0) }}</span>
            </div>
            <div style="margin-top: 16px; padding-top: 16px; border-top: 1px solid var(--border-color);">
                <form method="post" action="/plans/{{ plan.id }}/delete" style="display: inline;" onsubmit="return confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –ø–ª–∞–Ω ¬´{{ plan.name }}¬ª? –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å.');">
                    <button type="submit" style="background: var(--error); color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer; font-size: 14px; font-family: inherit; width: 100%;">
                        üóëÔ∏è –£–¥–∞–ª–∏—Ç—å –ø–ª–∞–Ω
                    </button>
                </form>
            </div>
        </div>
    </div>
    {% endfor %}
</div>
{% endblock %}
